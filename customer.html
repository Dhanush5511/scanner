<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Ecomen Laboratory Pvt. Ltd.</title>

<script src="https://cdn.tailwindcss.com"></script>
<script src="https://unpkg.com/html5-qrcode"></script>

</head>

<body class="bg-gray-100 min-h-screen">

<!-- HEADER -->
<header class="bg-white border-b">
<div class="max-w-6xl mx-auto flex items-center gap-4 p-4">
<div class="w-16 h-16 border-2 border-dashed rounded-lg flex items-center justify-center text-gray-400">Logo</div>
<div>
<h1 class="text-2xl font-bold">Ecomen Laboratory Pvt. Ltd.</h1>
<p class="text-gray-500">Sample Registration System</p>
</div>
</div>
</header>

<!-- FORM -->
<div class="max-w-3xl mx-auto mt-10 bg-white p-8 rounded-xl shadow">

<form onsubmit="return validateForm()">

<h2 class="font-bold text-lg">TRF DETAILS</h2>
<hr class="border-green-500 mt-2 mb-6">

<!-- Sample Code -->
<label>Sample Code *</label>
<div class="flex gap-3 mt-1">
<input id="sampleCode" autofocus class="w-full border rounded-lg p-3"
placeholder="Enter or scan sample code">

<button type="button" onclick="startScanner()"
class="border border-green-500 text-green-600 px-5 rounded-lg">Barcode</button>

<button type="button" onclick="startScanner()"
class="border border-green-500 text-green-600 px-5 rounded-lg">QR</button>
</div>

<p class="text-sm text-gray-500 mt-1">Use USB scanner or click camera buttons above</p>

<!-- Scanner -->
<div id="scannerBox" class="hidden mt-4">
<div id="reader" class="w-72"></div>
<button type="button" onclick="stopScanner()" class="text-red-500 mt-2">Cancel Scanner</button>
</div>

<!-- Type -->
<div class="mt-6">
<label>Type of Sample *</label>
<select id="sampleType" onchange="checkOther()"
class="w-full border rounded-lg p-3 mt-1">
<option>Select sample type</option>
<option>Blood</option>
<option>Urine</option>
<option>Others</option>
</select>

<input id="otherSample" placeholder="Enter sample type"
class="w-full border rounded-lg p-3 mt-2 hidden">
</div>

<!-- PACKAGE -->
<div class="mt-6">
<label>Package *</label>

<div id="packageInput"
onclick="togglePackageDropdown()"
class="border rounded-lg p-2 flex flex-wrap gap-2 cursor-pointer">

<span id="packagePlaceholder" class="text-gray-400">
Select packages...
</span>

</div>

<div id="packageDropdown"
class="hidden border rounded-lg mt-1 max-h-48 overflow-y-scroll bg-white">

<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Copper')">Copper</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Cobalt')">Cobalt</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Chromium')">Chromium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Antimony')">Antimony</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Iron')">Iron</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Cadmium')">Cadmium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Beryllium')">Beryllium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Molybdenum')">Molybdenum</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Nickel')">Nickel</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Vanadium')">Vanadium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Zinc')">Zinc</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Bismuth')">Bismuth</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Cesium')">Cesium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Uranium')">Uranium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Strontium')">Strontium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Aluminium')">Aluminium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Barium')">Barium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Silver')">Silver</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Tin')">Tin</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Thallium')">Thallium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Arsenic')">Arsenic</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Lead')">Lead</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Mercury')">Mercury</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Platinum')">Platinum</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Tungsten')">Tungsten</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Calcium')">Calcium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Magnesium')">Magnesium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Manganese')">Manganese</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Selenium')">Selenium</div>
<div class="p-2 hover:bg-gray-100 cursor-pointer" onclick="selectPackage('Lithium')">Lithium</div>

</div>

<!-- CUSTOMER -->
<h2 class="font-bold text-lg mt-10">Customer Details (Optional)</h2>
<hr class="border-green-500 mt-2 mb-6">

<div class="grid grid-cols-2 gap-6">
<input placeholder="Name" class="border p-3 rounded-lg">
<input placeholder="Age" type="number" class="border p-3 rounded-lg">

<select class="border p-3 rounded-lg">
<option>Select sex</option>
<option>Male</option>
<option>Female</option>
<option>Other</option>
</select>

<input placeholder="Location" class="border p-3 rounded-lg">
</div>

<!-- COLLECTION -->
<h2 class="font-bold text-lg mt-10">Collection Details</h2>
<hr class="border-green-500 mt-2 mb-6">

<div class="grid grid-cols-2 gap-6">
<input id="collectionDT" type="datetime-local" class="border p-3 rounded-lg">
<input id="timestamp" readonly class="border p-3 rounded-lg bg-gray-100">
</div>

<!-- NEXT -->
<div class="flex justify-center mt-10">
<button class="bg-green-600 text-white px-16 py-3 rounded-lg">Next</button>
</div>

</form>

</div>

<!-- SCRIPT -->
<script>

let html5QrCode;
let selectedPackages=[];

function startScanner(){
document.getElementById("scannerBox").classList.remove("hidden");
html5QrCode=new Html5Qrcode("reader");
html5QrCode.start({facingMode:"environment"},{fps:10,qrbox:250},
(text)=>{
document.getElementById("sampleCode").value=text;
stopScanner();
});
}

function stopScanner(){
if(html5QrCode){html5QrCode.stop();}
document.getElementById("scannerBox").classList.add("hidden");
}

function checkOther(){
let v=document.getElementById("sampleType").value;
document.getElementById("otherSample").classList.toggle("hidden",v!=="Others");
}

function togglePackageDropdown(){
document.getElementById("packageDropdown").classList.toggle("hidden");
}

function selectPackage(pkg){
if(!selectedPackages.includes(pkg)){
selectedPackages.push(pkg);
renderPackages();
}
}

function removePackage(pkg){
selectedPackages=selectedPackages.filter(p=>p!==pkg);
renderPackages();
}

function renderPackages(){
let box=document.getElementById("packageInput");
box.innerHTML="";
if(selectedPackages.length===0){
box.innerHTML="<span class='text-gray-400'>Select packages...</span>";
return;
}
selectedPackages.forEach(p=>{
box.innerHTML+=`<span class="bg-green-100 text-green-700 px-3 py-1 rounded-full">
${p} <span onclick="removePackage('${p}')" style="cursor:pointer">âœ–</span>
</span>`;
});
}

function setTimestamp(){
let d=new Date();
document.getElementById("timestamp").value=
d.getFullYear()+"-"+(d.getMonth()+1)+"-"+d.getDate()+" "+
d.getHours()+":"+d.getMinutes()+":"+d.getSeconds();
}
setTimestamp();

function validateForm(){
if(document.getElementById("sampleCode").value.trim()==""){
alert("Enter Sample Code"); return false;
}
if(document.getElementById("sampleType").value=="Select sample type"){
alert("Select Sample Type"); return false;
}
if(selectedPackages.length==0){
alert("Select at least one Package"); return false;
}
if(document.getElementById("collectionDT").value==""){
alert("Select Collection Date & Time"); return false;
}
return true;
}

</script>

</body>
</html>
